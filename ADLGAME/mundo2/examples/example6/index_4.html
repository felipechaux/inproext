<!DOCTYPE html>
<html>
    <head>
        <title>Traviso.js - Example 6 - Single Ground Image</title>
        <style>
            body {
                margin: 0;
                padding: 0;
                background-color: #000000;
                overflow: hidden;
            }
        </style>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/latest/easing/EasePack.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/latest/TweenLite.min.js"></script>
        <script src="../js/pixi.js"></script>
        <script src="../js/traviso.dev.js"></script>
        <link rel="stylesheet" href="../../../css/main.css">
        <link rel="stylesheet" href="../../../js/main.js">
    </head>

    
    <body onload="temporizador();">
        <div class="menulateralADL flexverticalADL">
            <div class="tooltipADL" onclick="tiplogia1();">
            <img class="imagenmenulateral" src="../../../img/escudo.png"><span class="tooltiptextADL" >Tiplogia 1</span>
            </div>
            <div class="tooltipADL disabled" onclick="tiplogia2();">
            <img class="imagenmenulateral" src="../../../img/huella.png"><span class="tooltiptextADL" >Tiplogia 2</span>
            </div>
            <div class="tooltipADL disabled" onclick="tiplogia3();">
            <img class="imagenmenulateral" src="../../../img/documento.png"><span class="tooltiptextADL" >Tiplogia 3</span>
            </div>
            <div class="tooltipADL disabled" onclick="tiplogia4();">
            <img class="imagenmenulateral" src="../../../img/cosa-rara.png"><span class="tooltiptextADL" >Tiplogia 4</span>
            </div>
            <div class="tooltipADL disabled" onclick="tipologia5();">
            <img class="imagenmenulateral" src="../../../img/impresion.png"><span class="tooltiptextADL">Tiplogia 5</span>
            </div>
            <div class="tooltipADL disabled" onclick="cerrartipologias();">
            <img class="imagenmenulateral" src="../../../img/dinero.png"><span class="tooltiptextADL">Cerrar tipologías</span>
            </div>
            <div class="tooltipADL disabled" onclick="parent.slide4();">
            <img class="imagenmenulateral" src="../../../img/ubicacion.png"><span class="tooltiptextADL" >Ir al html 4</span>
            </div>
        </div>

<div class="campanaADL "  style="display: none;">
    <div class="tooltipADL">
    <img class="imagenmenulateral" src="../../../img/campana.png"><span class="tooltiptextADL" style="top: 14px;
    left: -128%;">Acción g</span>
    </div>
    <div class="numerocampanaALD">1</div>
</div>

<!-- TIPOLOGÍA CONVERSACIÓN -->
<div id="tiplogia1" class="cajafancyADL flexverticalADL" style="display: none; overflow: auto;">
    
    <div class="flexhorizontalADL scale-in-hor-left" style="animation-delay: 0s">
        <img src="../../../img/personaje-redondo.png">
        <p class="textointernofancyADL"> 
         Muy bien, creo que ya comienzas 
            a comprender un poco cómo funciona 
            SARO. </p> 

     </div>
   
    <div class="flexhorizontalADL scale-in-hor-left" style="animation-delay: 2s">
        <p class="textointernofancymoradoADL">  
            Sí, la verdad es bastante interesante. 
            ¿Cómo es que los empleados no tienen esta 
            información?, es algo muy importante.  </p> 
        <img src="../../../img/visto.png">        
     </div>


     <div class="flexhorizontalADL scale-in-hor-left" style="animation-delay: 4s">
        <img src="../../../img/personaje-redondo.png">
        <p class="textointernofancyADL"> 
            Pues, debes saber que ADL no es 
            una compañía vigilada por la SFC,
             como no es de forma obligatorio 
             que nuestros empleados sepan esta 
             información, a muchos les resulta 
             tedioso aprenderla. Aún así, 
             sería maravilloso que la comprendieran, 
             si cada trabajador de nuestra compañía  
             tuviera esta información, podríamos cumplir
              más fácilmente con nuestra intención 
              e mitigar todo tipo de riesgo dentro 
              de la compañía, y así brindar mayor 
              protección a nuestros clientes,
               proveedores y a nuestra reputación 
               como empresa de servicios.  </p> 

     </div>

     <div class="flexhorizontalADL scale-in-hor-left" style="animation-delay: 6s">
        <p class="textointernofancymoradoADL">  
            Claro, eso haría que la prevención 
            de riesgos dentro de la compañía fuera 
            más completa y sencilla.  </p> 
        <img src="../../../img/visto.png">        
     </div>

     <div class="flexhorizontalADL scale-in-hor-left" style="animation-delay: 8s">
        <img src="../../../img/personaje-redondo.png">
        <p class="textointernofancyADL"> 
            Exacto… Ahora que lo pienso, 
            eres la primera persona que llega nueva 
            a la empresa y se interesa por conocer 
            algo del funcionamiento de la Gestión 
            Integral de Riesgo en general.  </p> 

     </div>
     <div class="flexhorizontalADL scale-in-hor-left" style="animation-delay: 10s">
        <p class="textointernofancymoradoADL"> 
            Eeeeh, bueno... La verdad no creo ser el único,
             pero si tú lo dices… Este es un tema que me parece
              muy interesante. Pero bueno… dijiste que SARO 
              tiene cuatro etapas, y hasta ahora solo me 
              has hablado de la de identificación. 
        </p> 
        <img src="../../../img/visto.png">        
     </div>

     <div class="flexhorizontalADL scale-in-hor-left" style="animation-delay: 12s">
        <img src="../../../img/personaje-redondo.png">
        <p class="textointernofancyADL"> 
            Ja, ja, ja, créeme, sí eres el único. 
            ¿De verdad quieres conocer más sobre
             el funcionamiento de SARO?  </p> 

     </div>


     <div id="btn-si" class="flexhorizontalADL scale-in-hor-left" style="animation-delay: 14s">
        <p class="textointernofancyADL">Sí, claro, es un tema muy interesante.  </p> 
        <img class="boton" src="../../../img/enviar.png" onclick="chatSi()">        
     </div>

     <div id="btn-no" class="flexhorizontalADL scale-in-hor-left" style="animation-delay: 14s">
        <p class="textointernofancyADL"> La verdad me da pena contigo. </p> 
        <img class="boton" src="../../../img/enviar.png" onclick="chatNo()">        
     </div>


     <div id="interesante" class="flexverticalADL" style="display: none;" >
        

        <div class="flexhorizontalADL scale-in-hor-left" >
            <p class="textointernofancymoradoADL"> 
                Sí, claro, es un tema muy interesante.
            </p> 
            <img src="../../../img/visto.png">        
         </div>
         
        <div class="flexhorizontalADL scale-in-hor-left" style="animation-delay: 2s">
            <img src="../../../img/personaje-redondo.png">
            <p class="textointernofancyADL"> 
                ¡Genial! De verdad es muy bueno que 
                quieras aprender sobre la Gestión de 
                Riesgos, sobretodo que sepas esta 
                información desde tu primer día de trabajo. 
            </p> 
                
         </div>
    
       
         <div class="flexhorizontalADL scale-in-hor-left" style="animation-delay: 4s">
            <p class="textointernofancymoradoADL"> 
                Tienes razón, este es un tema 
                bastante importante, sé que si 
                lo aprendo desde ahora podré ayudar 
                a la compañía a mantenerse a salvo 
                con mis acciones.
            </p> 
            <img src="../../../img/visto.png">        
       
         </div>

         <div class="flexhorizontalADL scale-in-hor-left" style="animation-delay: 6s">
            <img src="../../../img/personaje-redondo.png">
            <p class="textointernofancyADL"> 
            
                ¡Exacto!... Presiento que nos 
                llevaremos muy bien. En este momento 
                no puedo contestar a tu pregunta porque 
                debo seguir pendiente de lo que pasa en 
                esta sección de la compañía, pero si quieres 
                busca a mi amigo Tobor3, debe estar en 
                la otra sección de atención al público. 
                Él podrá contestar a tu pregunta.
            </p> 
              
         </div>


         <div class="flexhorizontalADL scale-in-hor-left" style="animation-delay: 8s">
            <p class="textointernofancymoradoADL"> 
               Vale, muchas gracias por tu atención, espero que nos veamos pronto. 
            </p> 
            <img src="../../../img/visto.png">        
       
         </div>

         <div class="flexhorizontalADL scale-in-hor-left" style="animation-delay: 10s">
            <img src="../../../img/personaje-redondo.png">
            <p class="textointernofancyADL">  
                Así será.  
            </p> 
             
         </div>
            
      
     </div>

     <div id="no" class="flexverticalADL" style="display: none;" >
        

        <div class="flexhorizontalADL scale-in-hor-left" >
            <p class="textointernofancymoradoADL"> 
                La verdad me da pena contigo.
            </p> 
            <img src="../../../img/visto.png">        
         </div>
    
       
         <div class="flexhorizontalADL scale-in-hor-left" style="animation-delay: 2s">
            <img src="../../../img/personaje-redondo.png">
            <p class="textointernofancyADL"> 
            
                ¿Pena por qué?, de verdad es
                muy bueno que quieras aprender 
                sobre la Gestión de Riesgos, 
                sobretodo que sepas esta información 
                desde tu primer día de trabajo. 
            </p> 
              
         </div>


         <div class="flexhorizontalADL scale-in-hor-left" style="animation-delay: 4s">
            <p class="textointernofancymoradoADL"> 
                Tienes razón, este es un tema bastante importante, 
                y sé que si lo aprendo desde ahora podré ayudar 
                a la compañía a mantenerse a salvo con mis acciones.
            </p> 
            <img src="../../../img/visto.png">        
       
         </div>

         <div class="flexhorizontalADL scale-in-hor-left" style="animation-delay: 6s">
            <img src="../../../img/personaje-redondo.png">
            <p class="textointernofancyADL"> 
            
                ¡Exacto!... presiento que nos llevaremos muy bien.
                 En este momento no puedo contestar a tu pregunta 
                 porque debo seguir pendiente de lo que pasa en 
                 esta sección de la compañía, pero si quieres 
                 busca a mi amigo Tobor3, debe estar en la otra 
                 sección de atención al público. Él podrá contestar
                  a tu pregunta. 
            </p> 
              
         </div>

         <div class="flexhorizontalADL scale-in-hor-left" style="animation-delay: 8s">
            <p class="textointernofancymoradoADL"> 
                Vale, muchas gracias por tu atención, espero que nos veamos pronto. 
            </p> 
            <img src="../../../img/visto.png">        
       
         </div>

         <div class="flexhorizontalADL scale-in-hor-left" style="animation-delay: 10s">
            <img src="../../../img/personaje-redondo.png">
            <p class="textointernofancyADL">  
                Así será. 
            </p>   
         </div>
        
     </div>

</div>

<!-- TIPOLOGÍA PALABRAS -->
<div id="tiplogia2" class="cajafancyADL flexverticalADL" style="display: none;" >

    <video id="videocayendo1" class="videoADL" src="../../../video/palabras-cayendo.mp4" onclick='playVid();' onended="preguntavideocayendo1();" ></video>
        <div id="preguntavideocayendo1" class="flexverticalADL" style="width: 90%;display: none;">
                    <p class="textopalabrasADL textomoradoADL" style="background-color: grey"> Opción 1 </p>      
                    <p class="textopalabrasADL textomoradoADL" style="background-color: grey"> Opción 2 </p>            
        </div>
</div>


<!-- TIPOLOGÍA BIEN O MAL -->
<div id="tiplogia3" class="cajafancyADL flexverticalADL" style="display: none;" >
    <div class="flexhorizontalADLsino">
        <img src="../../../img/pregunta.png"><p>FCPA Es la Ley de Prácticas Corruptas en el extranjero.</p> 
     </div>

     <div class="flexhorizontalADL">
        <img class="boton" src="../../../img/bien.png">
        <img class="boton" src="../../../img/mal.png">        
     </div>
</div>

<!-- TIPOLOGÍA AUDIOL -->
<div id="tiplogia4" class="cajafancyADL flexverticalADL" style="background-color: #EDE8F9;display: none" >
    <div class="flexhorizontalADL">
        <div style="position: absolute;width: 50%;height: 100%;background-color: white;border-radius: 25px;left: 0">
            <div class="flexverticalADL" style="background-color: white;border-radius: 25px;height: 90%;width: 90%;">
            <img src="../../../img/personaje-redondo.png"> 
            <p class="textomoradoADL">Nombre</p>
            <div class="flexhorizontalADL">
                <img class="boton" src="../../../img/pause.png"> 
                <img class="boton" src="../../../img/play.png"> 
            </div>
        </div> 
        </div>

        <div class="flexverticalADL" style="position: absolute;width: 50%;height: 100%;background-color: transparent;border-radius: 25px;left: 50%">
            <div class="flexverticalADL">
            <p class="textomoradoADL">Definición</p>
            <div class="flexverticalADL" style="width: 90%;">
                <p class="textopalabrasADL textomoradoADL" style="background-color: white"> Opción 1 </p>      
                <p class="textopalabrasADL textomoradoADL" style="background-color: white"> Opción 2 </p>            
            </div>
            </div>
        </div>
</div>
</div>

<div id="tipologia5" class="cajafancyADL flexverticalADL" style="display: none;" onload="$(this).text('Hello world in Div using text()');">
  <div class="flexverticalADL" style="background-image: url(../../../img/fondo-nave.gif);height: 100%;width: 52%;color: white" onload="temporizador();">
        Pregunta aquí
        
    </div>

        <div id="preguntavideocayendo1" class="flexhorizontalADL" style="width: 90%;position: absolute;
    bottom: 9%;" onload="hello()">
                    <p class="textopalabrasADL textomoradoADL" style="background-color: #2098d16e;color: white" onclick="myFunction();"> Levantar nave </p>      
                    <p class="textopalabrasADL textomoradoADL" style="background-color: #2098d16e;color: white" onclick="temporizador();"> Activar cronometro </p>
  
                        <progress class="verticalADL" value="0" max="10" id="progressBar">hola</progress>
                        <div id="countdown" class="temporizadoADL"></div>

                                
        </div>
        <img id="nave" class="cosa"  src="../../../img/nave.png" style="position: absolute;">

</div>





















        <script type="text/javascript">
            function alarma(){
                parent.slide4();            
                }

        </script>
        <script>

    ////// Here, we initialize the pixi application
    var pixiRoot = new PIXI.Application(1930, 1080, { backgroundColor : 0xE8EDEE  });

    // add the renderer view element to the DOM
    document.body.appendChild(pixiRoot.view);
    
    ////// Here, we create our traviso instance and add on top of pixi
    
    // engine-instance configuration object
    var instanceConfig =
    {
        mapDataPath : "mapData_4.json", // the path to the json file that defines map data, required
        assetsToLoad : ["../assets/assets_map.json", "../assets/assets_characters.json", "../assets/groundImage.jpg"], // array of paths to the assets that are desired to be loaded by traviso, no need to use if assets are already loaded to PIXI cache, default null
        
        initialZoomLevel : -0.1,
        
        checkPathOnEachTile : false,
        
        engineInstanceReadyCallback : onEngineInstanceReady, // callback function that will be called once everything is loaded and engine instance is ready, default null
        tileSelectCallback : onTileSelect, // callback function that will be called when a tile is selected (call params will be the row and column indexes of the tile selected), default null
        objectSelectCallback : onObjectSelect, // callback function that will be called when a tile with an interactive map-object on it is selected (call param will be the object selected), default null
        objectReachedDestinationCallback : onObjectReachedDestination, // callback function that will be called when any moving object reaches its destination (call param will be the moving object itself), default null
        otherObjectsOnTheNextTileCallback : onOtherObjectsOnTheNextTile // callback function that will be called when any moving object is in move and there are other objects on the next tile (call params will be the moving object and an array of objects on the next tile), default null
    };

    var engine = TRAVISO.getEngineInstance(instanceConfig, { logEnabled: true });
    
    
    // this method will be called when the engine is ready
    function onEngineInstanceReady()
    {
        pixiRoot.stage.addChild(engine);
    }
    
    // this method will be called everytime a tile is selected in the engine
    function onTileSelect(rowIndex, columnIndex)
    {
            
    }
    
    // this method will be called when a tile with an interactive map-object on it is selected
    function onObjectSelect(obj)
    {
        engine.moveCurrentControllableToLocation(obj.mapPos);
    }
    
    // this method will be called when any moving object reaches its destination
    function onObjectReachedDestination(obj)
    {
        var objectsOnDestination = engine.getObjectsAtLocation(obj.mapPos);
        for (var i=0; i < objectsOnDestination.length; i++)
        {
            // check if there is a flag on the destination tile
            if(objectsOnDestination[i].type === 10)
            {
                obj.changeVisual("flip", false, true, flipAnimFinished);
                break;
            }
        }
    }
    
    // this method will be called when the custom flip anim finished
    function flipAnimFinished (obj)
    {
        // change the visual of the object so that it will face its last direction
        obj.changeVisualToDirection(obj.currentDirection, false);
    }
    
    // this method will be called when any moving object is in move and there are other objects on the next tile
    function onOtherObjectsOnTheNextTile(movingObject, objectsOnNewTile)
    {
        var boxAnim;
        for (var i=0; i < objectsOnNewTile.length; i++)
        {
            // check if there are boxes on the next tile
            if(objectsOnNewTile[i].type === 12)
            {   alarma();
                boxAnim = createAndStartBoxAnim();
                engine.addCustomObjectToLocation(boxAnim, objectsOnNewTile[i].mapPos);
                engine.removeObjectFromLocation(objectsOnNewTile[i]);
            }
        }
    }
    
    // creates 6 boxes and spreads them up throuh a simple tween animation
    function createAndStartBoxAnim()
    {
        // create six seperate boxes to spread
        var boxAnim = new PIXI.Container();
        var t = PIXI.Texture.fromFrame("box.png");
        var box;
        var boxes = [];
        for (var i=0; i < 6; i++)
        {
            box = new PIXI.extras.AnimatedSprite([t]);
            box.anchor.x = box.anchor.y = 0.5;
            boxAnim.addChild(box);
            boxes[boxes.length] = box;
        }
        
        // play a simple spread anim for the boxes
        var boxTargets = [[-75, -125], [-50, -100], [-25, -75], [25, -75], [50, -100], [75, -125]];
        for (var i=0; i < boxes.length; i++)
        {
            TweenLite.to( boxes[i].position, 0.5, { x: boxTargets[i][0], y: boxTargets[i][1], ease:"Back.easeOut" } );
            TweenLite.to( boxes[i], 0.7, { alpha: 0 } );
        }
        
        return boxAnim;
    }

        </script>
    </body>
</html>

<script type="text/javascript">
        function tiplogia1(){
        document.getElementById("tiplogia1").style.display = "block";
        }
        function tiplogia2(){
        document.getElementById("tiplogia2").style.display = "flex";
        }
        function tiplogia3(){
        document.getElementById("tiplogia3").style.display = "flex";
        }
        function tiplogia4(){
        document.getElementById("tiplogia4").style.display = "flex";
        }
        function tipologia5(){
        document.getElementById("tipologia5").style.display = "flex";
        }
        function cerrartipologias(){
        document.getElementById("tiplogia1").style.display = "none";
        document.getElementById("tiplogia2").style.display = "none";
        document.getElementById("tiplogia3").style.display = "none";
        document.getElementById("tiplogia4").style.display = "none";
        document.getElementById("tiplogia5").style.display = "none";
        }

</script>
<script type="text/javascript">
    function enviarmensaje(){
        alert("Respuesta enviada");
    }
</script>

<!-- videos -->

<script type="text/javascript">
    var vid = document.getElementById("videocayendo1");

function playVid() {
    vid.play();
}

function pauseVid() {
    vid.pause();
}
</script>

<script type="text/javascript">
    function preguntavideocayendo1(){
        document.getElementById("videocayendo1").style.display = "none";
        document.getElementById("preguntavideocayendo1").style.display = "flex";
    }
</script>



<script>
function myFunction() {
  document.getElementById("nave").style.animationName = "myNEWmove";
  setTimeout(function(){ document.getElementById("nave").style.animationName = "mymove";; }, 50 );
}
</script>

<!-- CONTADOR -->

<script type="text/javascript">   
function temporizador(){
    var timeleft = 10;
var downloadTimer = setInterval(function(){
  if(timeleft <= 0){
   // alert("Has perdido");
    clearInterval(downloadTimer);
  }
  else {
    document.getElementById("countdown").innerHTML =  timeleft + " Segundos";
  }
  document.getElementById("progressBar").value = 10 - timeleft;
  timeleft -= 1;
}, 1000);
} 
</script>

